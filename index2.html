<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>View home with Sweet Home 3D HTML5 Viewer</title>
<!--  Copy the following scripts in your page header -->
<script type="text/javascript" src="lib/big.min.js"></script>
<script type="text/javascript" src="lib/gl-matrix-min.js"></script>
<script type="text/javascript" src="lib/jszip.min.js"></script>
<script type="text/javascript" src="lib/core.min.js"></script>
<script type="text/javascript" src="lib/geom.min.js"></script>
<script type="text/javascript" src="lib/stroke.min.js"></script>
<script type="text/javascript" src="lib/batik-svgpathparser.min.js"></script>
<script type="text/javascript" src="lib/jsXmlSaxParser.min.js"></script>
<script type="text/javascript" src="lib/triangulator.min.js"></script>
<script type="text/javascript" src="lib/viewmodel.min.js"></script>
<script type="text/javascript" src="lib/viewhome.min.js"></script>
<style type="text/css">
* {
  margin: 0;
}

.wrapper {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.page-main {
  flex-grow: 1;
  background: #331E4D;
}

</style>
</head>

<body>
    <div class="wrapper">
      <main id="main" class="page-main">
          <canvas id="viewerCanvas" class="viewerComponent" width="800" height="600"
                  style="background-color: #CCCCCC; border: 1px solid gray; outline:none" tabIndex="1"></canvas>
      </main>
      <div>
          <div id="viewerProgressDiv">
            <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 400px"></progress>
            <label id="viewerProgressLabel" class="viewerComponent"></label>
          </div>
          <div id="viewerNavigationDiv" style="padding: 10px;">
            <input  id="aerialView" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>
              <label class="viewerComponent" for="aerialView" style="visibility: hidden;">Aerial view</label>
            <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>
              <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">Virtual visit</label>
            <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>
          </div>
      </div>
    </div>
    <script type="text/javascript">
      var homeUrl = "Dom%20w%20everniach.zip";
      var onerror = function(err) {
          if (err == "No WebGL") {
            alert("Sorry, your browser doesn't support WebGL.");
          } else {
            console.log(err.stack);
            alert("Error: " + (err.message  ? err.constructor.name + " " +  err.message  : err)
                  + (window.location.href.indexOf("file://") === 0 ? "\nCheck your browser is allowed to access local files." : ""));
          }
        };
      var onprogression = function(part, info, percentage) {
          var progress = document.getElementById("viewerProgress"); 
          if (part === HomeRecorder.READING_HOME) {
            // Home loading is finished 
            progress.value = percentage * 100;
            info = info.substring(info.lastIndexOf('/') + 1);
          } else if (part === Node3D.READING_MODEL) {
            // Models loading is finished 
            progress.value = 100 + percentage * 100;
            if (percentage === 1) {
              document.getElementById("viewerProgressDiv").style.visibility = "hidden";
            }
          }
        
          document.getElementById("viewerProgressLabel").innerHTML = 
              (percentage ? Math.floor(percentage * 100) + "% " : "") + part + " " + info;
        };

        window.addEventListener("load", function(){
            let main = document.getElementById('main');
            let canvas = document.getElementById('viewerCanvas');
            
            canvas.height = main.offsetHeight - 7;
            canvas.width = main.offsetWidth;

            viewHome("viewerCanvas",    // Id of the canvas
               homeUrl,           // URL or relative URL of the home to display 
               onerror,           // Callback called in case of error
               onprogression,     // Callback called while loading 
              {roundsPerMinute: 1,                    // Rotation speed of the animation launched once home is loaded in rounds per minute, no animation if missing or equal to 0 
               navigationPanel: "none",               // Displayed navigation arrows, "none" or "default" for default one or an HTML string containing elements with data-simulated-key 
                                                      // attribute set "UP", "DOWN", "LEFT", "RIGHT"... to replace the default navigation panel, "none" if missing 
               aerialViewButtonId: "aerialView",      // Id of the aerial view radio button, radio buttons hidden if missing  
               virtualVisitButtonId: "virtualVisit",  // Id of the aerial view radio button, radio buttons hidden if missing  
               levelsAndCamerasListId: "levelsAndCameras",          // Id of the levels and cameras select component, hidden if missing
            /* level: "Roof", */                                    // Uncomment to select the displayed level, default level if missing */
            /* selectableLevels: ["Ground floor", "Roof"], */       // Uncomment to choose the list of displayed levels, no select component if empty array */
            /*camera: "Exterior view", */                          // Uncomment to select a camera, default camera if missing */
            /* selectableCameras: ["Exterior view", "Kitchen"], */  // Uncomment to choose the list of displayed cameras, no camera if missing */
               activateCameraSwitchKey: true                        // Switch between top view / virtual visit with space bar if not false or missing */
              });
        });
    </script>
</body>
</html>
